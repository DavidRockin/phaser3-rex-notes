!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexquadshapeplugin=e();}(undefined,(function(){function t(t,i,n){return i=l(i),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,e()?Reflect.construct(i,n||[],l(t).constructor):i.apply(t,n))}function e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));}catch(t){}return (e=function(){return !!t})()}function i(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return ("string"===e?String:Number)(t)}(t,"string");return "symbol"==typeof e?e:String(e)}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,i(o.key),o);}}function s(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e);}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}var a=Phaser.Renderer.WebGL.Utils,f=Phaser.Renderer.WebGL.Utils,c=Phaser.GameObjects.GetCalcMatrix,d=Phaser.Renderer.Canvas.SetTransform,y={renderWebGL:function(t,e,i,n){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),r=c(e,i,n),s=o.calcMatrix.copyFrom(r.calc),h=e._displayOriginX,l=e._displayOriginY,u=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&function(t,e,i,n,o,r){for(var s=a.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*n),h=i.pathData,l=i.pathIndexes,u=0;u<l.length;u+=3){var f=2*l[u],c=2*l[u+1],d=2*l[u+2],y=h[f+0]-o,g=h[f+1]-r,p=h[c+0]-o,P=h[c+1]-r,v=h[d+0]-o,S=h[d+1]-r,b=e.getX(y,g),m=e.getY(y,g),k=e.getX(p,P),x=e.getY(p,P),T=e.getX(v,S),A=e.getY(v,S);t.batchTri(i,b,m,k,x,T,A,0,0,1,1,s,s,s,2);}}(o,s,e,u,h,l),e.isStroked&&function(t,e,i,n,o){var r=t.strokeTint,s=f.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);r.TL=s,r.TR=s,r.BL=s,r.BR=s;var h=e.pathData,l=h.length-1,u=e.lineWidth,a=u/2,c=h[0]-n,d=h[1]-o;e.closePath||(l-=2);for(var y=2;y<l;y+=2){var g=h[y]-n,p=h[y+1]-o;t.batchLine(c,d,g,p,a,a,u,y-2,!!e.closePath&&y===l-1),c=g,d=p;}}(o,e,u,h,l),t.pipelines.postBatch(e);},renderCanvas:function(t,e,i,n){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var o=t.currentContext;if(d(t,o,e,i,n)){var r=e._displayOriginX,s=e._displayOriginY,h=e.pathData,l=h.length-1,u=h[0]-r,a=h[1]-s;o.beginPath(),o.moveTo(u,a),e.closePath||(l-=2);for(var f=2;f<l;f+=2){var c=h[f]-r,y=h[f+1]-s;o.lineTo(c,y);}o.closePath(),e.isFilled&&(!function(t,e,i,n){var o=i||e.fillColor,r=n||e.fillAlpha,s=(16711680&o)>>>16,h=(65280&o)>>>8,l=255&o;t.fillStyle="rgba("+s+","+h+","+l+","+r+")";}(o,e),o.fill()),e.isStroked&&(!function(t,e,i,n){var o=i||e.strokeColor,r=n||e.strokeAlpha,s=(16711680&o)>>>16,h=(65280&o)>>>8,l=255&o;t.strokeStyle="rgba("+s+","+h+","+l+","+r+")",t.lineWidth=e.lineWidth;}(o,e),o.stroke()),o.restore();}}},g=function(e){function i(){return o(this,i),t(this,i,arguments)}return h(i,e),s(i,[{key:"fillColor",get:function(){return this._fillColor},set:function(t){this._fillColor=t,this.isFilled=null!=t&&this._fillAlpha>0;}},{key:"fillAlpha",get:function(){return this._fillAlpha},set:function(t){this._fillAlpha=t,this.isFilled=t>0&&null!=this._fillColor;}},{key:"setFillStyle",value:function(t,e){return void 0===e&&(e=1),this.fillColor=t,this.fillAlpha=e,this}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this._strokeColor=t,this.isStroked=null!=t&&this._strokeAlpha>0&&this._lineWidth>0;}},{key:"strokeAlpha",get:function(){return this._strokeAlpha},set:function(t){this._strokeAlpha=t,this.isStroked=t>0&&null!=this._strokeColor&&this._lineWidth>0;}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this.isStroked=t>0&&null!=this._strokeColor;}},{key:"setStrokeStyle",value:function(t,e,i){return void 0===i&&(i=1),this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this}},{key:"updateData",value:function(){return this}},{key:"width",get:function(){return this.geom.width},set:function(t){this.resize(t,this.height);}},{key:"height",get:function(){return this.geom.height},set:function(t){this.resize(this.width,t);}},{key:"setSize",value:function(t,e){var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this}},{key:"resize",value:function(t,e){return this.setSize(t,e),this}}]),i}(Phaser.GameObjects.Shape);Object.assign(g.prototype,y);var p={setTLPosition:function(t,e){return this.geom.setTLPosition(t,e),this.dirty=!0,this},setTRPosition:function(t,e){return this.geom.setTRPosition(t,e),this.dirty=!0,this},setBLPosition:function(t,e){return this.geom.setBLPosition(t,e),this.dirty=!0,this},setBRPosition:function(t,e){return this.geom.setBRPosition(t,e),this.dirty=!0,this},resetCornerPosition:function(){return this.geom.resetCornerPosition(),this.dirty=!0,this},setTopSidePoint:function(t,e,i){if(Array.isArray(t))for(var n,o=t,r=0,s=o.length;r<s;r++)n=o[r],this.geom.setTopSidePoint(n.t,n.x,n.y);else this.geom.setTopSidePoint(t,e,i);return this.dirty=!0,this},setRightSidePoint:function(t,e,i){if(Array.isArray(t))for(var n,o=t,r=0,s=o.length;r<s;r++)n=o[r],this.geom.setRightSidePoint(n.t,n.x,n.y);else this.geom.setRightSidePoint(t,e,i);return this.dirty=!0,this},setBottomSidePoint:function(t,e,i){if(Array.isArray(t))for(var n,o=t,r=0,s=o.length;r<s;r++)n=o[r],this.geom.setBottomSidePoint(n.t,n.x,n.y);else this.geom.setBottomSidePoint(t,e,i);return this.dirty=!0,this},setLeftSidePoint:function(t,e,i){if(Array.isArray(t))for(var n,o=t,r=0,s=o.length;r<s;r++)n=o[r],this.geom.setLeftSidePoint(n.t,n.x,n.y);else this.geom.setLeftSidePoint(t,e,i);return this.dirty=!0,this},clearTopSidePoints:function(){return this.geom.clearTopSidePoints(),this.dirty=!0,this},clearRightSidePoints:function(){return this.geom.clearRightSidePoints(),this.dirty=!0,this},clearBottomSidePoints:function(){return this.geom.clearBottomSidePoints(),this.dirty=!0,this},clearLeftSidePoints:function(){return this.geom.clearLeftSidePoints(),this.dirty=!0,this},clearAllSidesPoints:function(){return this.geom.clearAllSidesPoints(),this.dirty=!0,this}},P=function(){function t(e,i,n,r){o(this,t),void 0===e&&(e=0),void 0===i&&(i=e),void 0===n&&(n=0),void 0===r&&(r=0),this.setTo(e,i,n,r),this.tlx=0,this.tly=0,this.trx=0,this.try=0,this.blx=0,this.bly=0,this.brx=0,this.bry=0,this.topSidePoints=[],this.rightSidePoints=[],this.bottomSidePoints=[],this.leftSidePoints=[];}return s(t,[{key:"setTo",value:function(t,e,i,n){return this.setPosition(t,e),this.setSize(i,n),this}},{key:"setPosition",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"setTLPosition",value:function(t,e){return this.tlx=t,this.tly=e,this}},{key:"setTRPosition",value:function(t,e){return this.trx=t,this.try=e,this}},{key:"setBLPosition",value:function(t,e){return this.blx=t,this.bly=e,this}},{key:"setBRPosition",value:function(t,e){return this.brx=t,this.bry=e,this}},{key:"resetCornerPosition",value:function(){return this.setTLPosition(0,0).setTRPosition(0,0).setBLPosition(0,0).setBRPosition(0,0),this}},{key:"setTopSidePoint",value:function(t,e,i){return v(this.topSidePoints,t,e,i),this}},{key:"setRightSidePoint",value:function(t,e,i){return v(this.rightSidePoints,t,e,i),this}},{key:"setBottomSidePoint",value:function(t,e,i){return v(this.bottomSidePoints,t,e,i),this}},{key:"setLeftSidePoint",value:function(t,e,i){return v(this.leftSidePoints,t,e,i),this}},{key:"clearTopSidePoints",value:function(){return this.topSidePoints.length=0,this}},{key:"clearRightSidePoints",value:function(){return this.rightSidePoints.length=0,this}},{key:"clearBottomSidePoints",value:function(){return this.bottomSidePoints.length=0,this}},{key:"clearLeftSidePoints",value:function(){return this.leftSidePoints.length=0,this}},{key:"clearAllSidesPoints",value:function(){return this.clearTopSidePoints().clearRightSidePoints().clearBottomSidePoints().clearLeftSidePoints(),this}}]),t}(),v=function(t,e,i,n){var o=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i].t===e)return t[i];return null}(t);o?(o.x=i,o.y=n):(t.push({t:e,x:i,y:n}),t.length>1&&function(t){t.sort((function(t,e){return t.t-e.t}));}(t));},S=function(t,e,i){var n=i.length;if(n>=2){var o=i[n-2],r=i[n-1];if(t===o&&e===r)return i}return i.push(t,e),i},b=Phaser.Utils.Objects.IsPlainObject,m=Phaser.Utils.Objects.GetValue,k=Phaser.Math.Linear,x=Phaser.Geom.Polygon.Earcut,T=function(e){function i(e,n,r,s,h,l,u){var a,f,c,d;if(o(this,i),b(n)){var y=n;n=y.x,r=y.y,s=y.width,h=y.height,l=y.color,u=y.alpha,f=y.strokeColor,c=y.strokeAlpha,d=y.strokeWidth;}void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=1),void 0===h&&(h=s);var g=new P;a=t(this,i,[e,"rexQuadShape",g]),g.setTo(0,0,s,h),a.setPosition(n,r),a.setFillStyle(l,u),void 0!==f&&void 0===d&&(d=2),a.setStrokeStyle(d,f,c),a.setTLPosition(m(y,"tlx",0),m(y,"tly",0)).setTRPosition(m(y,"trx",0),m(y,"try",0)).setBLPosition(m(y,"blx",0),m(y,"bly",0)).setBRPosition(m(y,"brx",0),m(y,"bry",0));var p=m(y,"leftSidePoints");p&&a.setLeftSidePoint(p);var v=m(y,"topSidePoints");v&&a.setTopSidePoint(v);var S=m(y,"rightSidePoints");S&&a.setRightSidePoint(S);var k=m(y,"bottomSidePoints");return k&&a.setBottomSidePoint(k),a.updateDisplayOrigin(),a.dirty=!0,a}return h(i,e),s(i,[{key:"updateData",value:function(){var t=this.geom,e=this.pathData;e.length=0;var i=t.width,n=t.height,o=0+t.tlx,r=0+t.tly,s=i+t.trx,h=0+t.try,l=i+t.brx,u=n+t.bry,a=0+t.blx,f=n+t.bly,c=t.topSidePoints,d=t.rightSidePoints,y=t.bottomSidePoints,g=t.leftSidePoints;S(o,r,e);for(var p=0,P=c.length;p<P;p++){var v=c[p],b=k(o,s,v.t)+v.x,m=k(r,h,v.t)+v.y;S(b,m,e);}S(s,h,e);for(p=0,P=d.length;p<P;p++){v=d[p],b=k(s,l,v.t)+v.x,m=k(h,u,v.t)+v.y;S(b,m,e);}S(l,u,e);for(p=y.length-1;p>=0;p--){v=y[p],b=k(a,l,v.t)+v.x,m=k(f,u,v.t)+v.y;S(b,m,e);}S(a,f,e);for(p=g.length-1;p>=0;p--){v=g[p],b=k(o,a,v.t)+v.x,m=k(r,f,v.t)+v.y;S(b,m,e);}return e.push(e[0],e[1]),this.pathIndexes=x(e),this}},{key:"tlx",get:function(){return this.geom.tlx},set:function(t){this.geom.tlx=t,this.dirty=!0;}},{key:"tly",get:function(){return this.geom.tly},set:function(t){this.geom.tly=t,this.dirty=!0;}},{key:"trx",get:function(){return this.geom.trx},set:function(t){this.geom.trx=t,this.dirty=!0;}},{key:"try",get:function(){return this.geom.try},set:function(t){this.geom.try=t,this.dirty=!0;}},{key:"blx",get:function(){return this.geom.blx},set:function(t){this.geom.blx=t,this.dirty=!0;}},{key:"bly",get:function(){return this.geom.bly},set:function(t){this.geom.bly=t,this.dirty=!0;}},{key:"brx",get:function(){return this.geom.brx},set:function(t){this.geom.brx=t,this.dirty=!0;}},{key:"bry",get:function(){return this.geom.bry},set:function(t){this.geom.bry=t,this.dirty=!0;}},{key:"leftSidePoints",get:function(){return this.geom.leftSidePoints}},{key:"topSidePoints",get:function(){return this.geom.topSidePoints}},{key:"bottomSidePoints",get:function(){return this.geom.bottomSidePoints}},{key:"rightSidePoints",get:function(){return this.geom.rightSidePoints}}]),i}(g);function A(t,e,i,n,o,r){var s=new T(this.scene,t,e,i,n,o,r);return this.scene.add.existing(s),s}Object.assign(T.prototype,p);var O=Phaser.Utils.Objects.GetAdvancedValue,R=Phaser.GameObjects.BuildGameObject;function j(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=O(t,"width",void 0),n=O(t,"height",i),o=O(t,"fillColor",void 0),r=O(t,"fillAlpha",void 0),s=new T(this.scene,0,0,i,n,o,r);return R(this.scene,s,t),s}var _=function(t){return null==t||""===t||0===t.length},L=function(e){function i(e){var n;return o(this,i),n=t(this,i,[e]),e.registerGameObject("rexQuadShape",A,j),n}return h(i,Phaser.Plugins.BasePlugin),s(i,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this);}}]),i}();return function(t,e,i,o){if(void 0===o&&(o="."),"object"===n(t)){if(_(e)){if(null==i)return;"object"===n(i)&&(t=i);}else {"string"==typeof e&&(e=e.split(o));var r=e.pop(),s=function(t,e,i){var o=t;if(_(e));else {var r;"string"==typeof e&&(e=e.split("."));for(var s=0,h=e.length;s<h;s++){var l;null!=o[r=e[s]]&&"object"===n(o[r])||(l=s===h-1?void 0===i?{}:i:{},o[r]=l),o=o[r];}}return o}(t,e);s[r]=i;}}}(window,"RexPlugins.GameObjects.QuadShape",T),L}));
