var t,e;t=void 0,e=function(){var t={setEventEmitter(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};const e=Phaser.Math.Wrap;var s=function({startX:t,startY:s,backward:i}){var r=this.targets,n=!Array.isArray(r[0]);s=n?0:e(s,0,r.length),u=n?r:r[s];for(var a,h=t=e(t,0,u.length),o=s;!a;){var u;a=(u=n?r:r[o])[h];var l=!0;if(this.getFocusEnableCallback&&(l=this.getFocusEnableCallback(a)),!l&&(a=null,i?(h-=1)<0&&(h=u.length-1,n||(o=e(o-1,0,r.length-1))):(h+=1)>=u.length&&(h=0,n||(o=e(o+1,0,r.length-1))),t===h&&s===o))return this.focusIndex.x=void 0,this.focusIndex.y=void 0,null}return this.focusIndex.x=h,this.focusIndex.y=o,a},i={getFirst(){return s.call(this,{startX:0,startY:0,backward:!1})},getLast(){return s.call(this,{startX:-1,startY:-1,backward:!0})},getNext(){return void 0===this.focusIndex.x?this.getFirst():s.call(this,{startX:this.focusIndex.x+1,startY:this.focusIndex.y,backward:!1})},getPrevious(){return void 0===this.focusIndex.x?this.getLast():s.call(this,{startX:this.focusIndex.x-1,startY:this.focusIndex.y,backward:!0})},getNextRow(){return void 0===this.focusIndex.x?this.getFirst():s.call(this,{startX:this.focusIndex.x,startY:this.focusIndex.y+1,backward:!1})},getPreviousRow(){return void 0===this.focusIndex.x?this.getLast():s.call(this,{startX:this.focusIndex.x,startY:this.focusIndex.y-1,backward:!0})}},r=function(t){if(t===this.focusedTarget)return this;n.call(this),this.focusedTarget=t,t&&this.emit("focus",t)},n=function(){if(!this.focusedTarget)return this;var t=this.focusedTarget;this.focusedTarget=null,this.emit("blur",t)},a={first(){return r.call(this,this.getFirst()),this},last(){return r.call(this,this.getLast()),this},next(){return r.call(this,this.getNext()),this},previous(){return r.call(this,this.getPrevious()),this},nextRow(){return r.call(this,this.getNextRow()),this},previousRow(){return r.call(this,this.getPreviousRow()),this},focus(t){if(t===this.focusedTarget)return this;var e=this.targets;if(Array.isArray(e)&&!Array.isArray(e[0]))-1!==(n=e.indexOf(t))&&(this.focusIndex.x=n,this.focusIndex.y=0,r.call(this,t));else for(var s=0,i=e.length;s<i;s++){var n;-1!==(n=e[s].indexOf(t))&&(this.focusIndex.x=n,this.focusIndex.y=s,r.call(this,t))}return this},blur:n},h={};Object.assign(h,i,a);const o=Phaser.Utils.Objects.GetValue,u=Phaser.Utils.Objects.IsPlainObject;class l{constructor(t,e){u(t)&&void 0===e&&(e=t,t=void 0);var s=o(e,"eventEmitter",void 0),i=o(e,"EventEmitterClass",void 0);this.setEventEmitter(s,i),this.scene=t,this.focusedTarget=void 0,this.focusIndex={x:void 0,y:void 0},this.resetFromJSON(e)}resetFromJSON(t){this.setTargets(o(t,"targets"),o(t,"columns"));var e=o(t,"getFocusEnableCallback");if(e)this.setGetFocusEnableCallback(e);else{var s=o(t,"focusEnableDataKey");if(s)this.setFocusEnableDataKey(s);else{var i=o(t,"focusEnableKey");i&&this.setFocusEnableKey(i)}}}destroy(){this.targets=void 0}setTargets(t,e){return t&&void 0!==e&&(t=function(t,e){return t.reduce((function(t,s,i){return i%e==0&&t.push([]),t[t.length-1].push(s),t}),[])}(t,e)),this.targets=t,this.blur(),this.focusIndex.x=void 0,this.focusIndex.y=void 0,this}setFocusEnableDataKey(t){var e;return t&&(e=function(e){return e.getData(t)}),this.setGetFocusEnableCallback(e),this}setFocusEnableKey(t){var e;return t&&(e=function(e){return e[t]}),this.setGetFocusEnableCallback(e),this}setGetFocusEnableCallback(t){return this.getFocusEnableCallback=t,this}getFocusedTarget(){return this.focusedTarget}}Object.assign(l.prototype,t,h);class c extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.on("destroy",this.destroy,this)}add(t){return new l(t)}}return c},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexgroupnavigatorplugin=e();
