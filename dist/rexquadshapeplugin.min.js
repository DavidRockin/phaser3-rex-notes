!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexquadshapeplugin=e();}(undefined,(function(){function t(t,i,n){return i=u(i),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,e()?Reflect.construct(i,n||[],u(t).constructor):i.apply(t,n))}function e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));}catch(t){}return (e=function(){return !!t})()}function i(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return ("string"===e?String:Number)(t)}(t,"string");return "symbol"==typeof e?e:String(e)}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r);}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e);}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var a=Phaser.Renderer.WebGL.Utils,f=Phaser.Renderer.WebGL.Utils,c=Phaser.GameObjects.GetCalcMatrix,y=Phaser.Renderer.Canvas.SetTransform,d={renderWebGL:function(t,e,i,n){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var r=t.pipelines.set(e.pipeline),o=c(e,i,n),s=r.calcMatrix.copyFrom(o.calc),l=e._displayOriginX,u=e._displayOriginY,h=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&function(t,e,i,n,r,o){for(var s=a.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*n),l=i.pathData,u=i.pathIndexes,h=0;h<u.length;h+=3){var f=2*u[h],c=2*u[h+1],y=2*u[h+2],d=l[f+0]-r,p=l[f+1]-o,v=l[c+0]-r,g=l[c+1]-o,b=l[y+0]-r,k=l[y+1]-o,m=e.getX(d,p),P=e.getY(d,p),x=e.getX(v,g),S=e.getY(v,g),O=e.getX(b,k),_=e.getY(b,k);t.batchTri(i,m,P,x,S,O,_,0,0,1,1,s,s,s,2);}}(r,s,e,h,l,u),e.isStroked&&function(t,e,i,n,r){var o=t.strokeTint,s=f.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);o.TL=s,o.TR=s,o.BL=s,o.BR=s;var l=e.pathData,u=l.length-1,h=e.lineWidth,a=h/2,c=l[0]-n,y=l[1]-r;e.closePath||(u-=2);for(var d=2;d<u;d+=2){var p=l[d]-n,v=l[d+1]-r;t.batchLine(c,y,p,v,a,a,h,d-2,!!e.closePath&&d===u-1),c=p,y=v;}}(r,e,h,l,u),t.pipelines.postBatch(e);},renderCanvas:function(t,e,i,n){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var r=t.currentContext;if(y(t,r,e,i,n)){var o=e._displayOriginX,s=e._displayOriginY,l=e.pathData,u=l.length-1,h=l[0]-o,a=l[1]-s;r.beginPath(),r.moveTo(h,a),e.closePath||(u-=2);for(var f=2;f<u;f+=2){var c=l[f]-o,d=l[f+1]-s;r.lineTo(c,d);}r.closePath(),e.isFilled&&(!function(t,e,i,n){var r=i||e.fillColor,o=n||e.fillAlpha,s=(16711680&r)>>>16,l=(65280&r)>>>8,u=255&r;t.fillStyle="rgba("+s+","+l+","+u+","+o+")";}(r,e),r.fill()),e.isStroked&&(!function(t,e,i,n){var r=i||e.strokeColor,o=n||e.strokeAlpha,s=(16711680&r)>>>16,l=(65280&r)>>>8,u=255&r;t.strokeStyle="rgba("+s+","+l+","+u+","+o+")",t.lineWidth=e.lineWidth;}(r,e),r.stroke()),r.restore();}}},p=function(e){function i(){return r(this,i),t(this,i,arguments)}return l(i,e),s(i,[{key:"fillColor",get:function(){return this._fillColor},set:function(t){this._fillColor=t,this.isFilled=null!=t&&this._fillAlpha>0;}},{key:"fillAlpha",get:function(){return this._fillAlpha},set:function(t){this._fillAlpha=t,this.isFilled=t>0&&null!=this._fillColor;}},{key:"setFillStyle",value:function(t,e){return void 0===e&&(e=1),this.fillColor=t,this.fillAlpha=e,this}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this._strokeColor=t,this.isStroked=null!=t&&this._strokeAlpha>0&&this._lineWidth>0;}},{key:"strokeAlpha",get:function(){return this._strokeAlpha},set:function(t){this._strokeAlpha=t,this.isStroked=t>0&&null!=this._strokeColor&&this._lineWidth>0;}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this.isStroked=t>0&&null!=this._strokeColor;}},{key:"setStrokeStyle",value:function(t,e,i){return void 0===i&&(i=1),this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this}},{key:"updateData",value:function(){return this}},{key:"width",get:function(){return this.geom.width},set:function(t){this.resize(t,this.height);}},{key:"height",get:function(){return this.geom.height},set:function(t){this.resize(this.width,t);}},{key:"setSize",value:function(t,e){var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this}},{key:"resize",value:function(t,e){return this.setSize(t,e),this}}]),i}(Phaser.GameObjects.Shape);Object.assign(p.prototype,d);var v=function(){function t(e,i,n,o){r(this,t),void 0===e&&(e=0),void 0===i&&(i=e),void 0===n&&(n=0),void 0===o&&(o=0),this.setTo(e,i,n,o),this.tlx=0,this.tly=0,this.trx=0,this.try=0,this.blx=0,this.bly=0,this.brx=0,this.bry=0;}return s(t,[{key:"setTo",value:function(t,e,i,n){return this.setPosition(t,e),this.setSize(i,n),this}},{key:"setPosition",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"setTLPosition",value:function(t,e){return this.tlx=t,this.tly=e,this}},{key:"setTRPosition",value:function(t,e){return this.trx=t,this.try=e,this}},{key:"setBLPosition",value:function(t,e){return this.blx=t,this.bly=e,this}},{key:"setBRPosition",value:function(t,e){return this.brx=t,this.bry=e,this}},{key:"resetCornerPosition",value:function(){return this.setTLPosition(0,0).setTRPosition(0,0).setBLPosition(0,0).setBRPosition(0,0),this}}]),t}(),g=function(t,e,i){var n=i.length;if(n>=2){var r=i[n-2],o=i[n-1];if(t===r&&e===o)return i}return i.push(t,e),i},b=Phaser.Utils.Objects.IsPlainObject,k=Phaser.Geom.Polygon.Earcut,m=function(e){function i(e,n,o,s,l,u,h){var a,f,c,y;if(r(this,i),b(n)){var d=n;n=d.x,o=d.y,s=d.width,l=d.height,u=d.color,h=d.alpha,f=d.strokeColor,c=d.strokeAlpha,y=d.strokeWidth;}void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=1),void 0===l&&(l=s);var p=new v;return a=t(this,i,[e,"rexQuadShape",p]),p.setTo(0,0,s,l),a.setPosition(n,o),a.setFillStyle(u,h),void 0!==f&&void 0===y&&(y=2),a.setStrokeStyle(y,f,c),a.updateDisplayOrigin(),a.dirty=!0,a}return l(i,e),s(i,[{key:"updateData",value:function(){var t=this.geom,e=this.pathData;e.length=0;var i=t.width,n=t.height,r=0+t.tlx,o=0+t.tly,s=i+t.trx,l=0+t.try,u=i+t.brx,h=n+t.bry,a=0+t.blx,f=n+t.bly;return g(r,o,e),g(s,l,e),g(u,h,e),g(a,f,e),e.push(e[0],e[1]),this.pathIndexes=k(e),this}},{key:"tlx",get:function(){return this.geom.tlx},set:function(t){this.geom.tlx=t,this.dirty=!0;}},{key:"tly",get:function(){return this.geom.tly},set:function(t){this.geom.tly=t,this.dirty=!0;}},{key:"trx",get:function(){return this.geom.trx},set:function(t){this.geom.trx=t,this.dirty=!0;}},{key:"try",get:function(){return this.geom.try},set:function(t){this.geom.try=t,this.dirty=!0;}},{key:"blx",get:function(){return this.geom.blx},set:function(t){this.geom.blx=t,this.dirty=!0;}},{key:"bly",get:function(){return this.geom.bly},set:function(t){this.geom.bly=t,this.dirty=!0;}},{key:"brx",get:function(){return this.geom.brx},set:function(t){this.geom.brx=t,this.dirty=!0;}},{key:"bry",get:function(){return this.geom.bry},set:function(t){this.geom.bry=t,this.dirty=!0;}},{key:"setTLPosition",value:function(t,e){return this.geom.setTLPosition(t,e),this}},{key:"setTRPosition",value:function(t,e){return this.geom.setTRPosition(t,e),this}},{key:"setBLPosition",value:function(t,e){return this.geom.setBLPosition(t,e),this}},{key:"setBRPosition",value:function(t,e){return this.geom.setBRPosition(t,e),this}},{key:"resetCornerPosition",value:function(){return this.geom.resetCornerPosition(),this}}]),i}(p);function P(t,e,i,n,r,o){var s=new m(this.scene,t,e,i,n,r,o);return this.scene.add.existing(s),s}var x=Phaser.Utils.Objects.GetAdvancedValue,S=Phaser.GameObjects.BuildGameObject;function O(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=x(t,"width",void 0),n=x(t,"height",i),r=x(t,"fillColor",void 0),o=x(t,"fillAlpha",void 0),s=new m(this.scene,0,0,i,n,r,o);return S(this.scene,s,t),s}var _=function(t){return null==t||""===t||0===t.length},T=function(e){function i(e){var n;return r(this,i),n=t(this,i,[e]),e.registerGameObject("rexQuadShape",P,O),n}return l(i,Phaser.Plugins.BasePlugin),s(i,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this);}}]),i}();return function(t,e,i,r){if(void 0===r&&(r="."),"object"===n(t)){if(_(e)){if(null==i)return;"object"===n(i)&&(t=i);}else {"string"==typeof e&&(e=e.split(r));var o=e.pop(),s=function(t,e,i){var r=t;if(_(e));else {var o;"string"==typeof e&&(e=e.split("."));for(var s=0,l=e.length;s<l;s++){var u;null!=r[o=e[s]]&&"object"===n(r[o])||(u=s===l-1?void 0===i?{}:i:{},r[o]=u),r=r[o];}}return r}(t,e);s[o]=i;}}}(window,"RexPlugins.GameObjects.QuadShape",m),T}));
